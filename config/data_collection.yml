# =============================================================================
# 数据采集配置
# 控制历史数据下载和实时数据采集
# =============================================================================

# 数据存储路径
data_storage_path: "/data"

# Binance 数据配置
binance:
  # 默认交易对列表
  symbols:
    - "BTCUSDT"
    - "ETHUSDT"
  
  # K线间隔 (1s, 1m, 3m, 5m, 15m, 30m, 1h, 2h, 4h, 6h, 8h, 12h, 1d, 3d, 1w, 1mo)
  interval: "1m"
  
  # 历史数据时间范围
  date_range:
    start_date: "2022-01-01"
    end_date: "2025-01-01"
  
  # 数据下载配置
  download:
    batch_size: 1000        # 批量下载大小
    retry_count: 3          # 重试次数
    retry_delay: 5          # 重试延迟(秒)
    checksum_verify: true   # 是否验证校验和
    concurrent_downloads: 2 # 并发下载数

# 数据验证配置
validation:
  # 数据完整性检查
  completeness_check: true
  
  # 时间连续性检查
  continuity_check: true
  
  # 价格合理性检查
  price_sanity_check:
    enabled: true
    max_price_change_percent: 20  # 最大价格变化百分比
    min_volume: 0                 # 最小成交量
  
  # 去重配置
  deduplication:
    enabled: true
    key_fields: ["symbol", "open_time"]

# InfluxDB 写入配置
influxdb:
  measurement_name: "crypto_ohlcv_1m"
  batch_size: 5000
  flush_interval: 10  # 秒
  
  # 标签配置
  tags:
    - "symbol"
    - "exchange"
    - "asset_type"
  
  # 字段配置
  fields:
    - "open"
    - "high" 
    - "low"
    - "close"
    - "volume"
    - "quote_volume"
    - "trades_count"

# Parquet 存储配置
parquet:
  # 分区策略
  partitioning:
    - "market"     # crypto/stock/futures
    - "date"       # YYYY-MM-DD
    - "symbol"     # BTCUSDT
  
  # 压缩设置
  compression: "snappy"
  
  # 文件大小限制 (MB)
  max_file_size: 100

# 数据质量监控
quality_monitoring:
  # 数据新鲜度阈值(分钟)
  freshness_threshold: 60
  
  # 缺失数据阈值(百分比)
  missing_data_threshold: 5
  
  # 重复数据阈值(百分比)  
  duplicate_threshold: 1

# 日志配置
logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  
  # InfluxDB 指标字段
  metrics_fields:
    - "download_duration_seconds"
    - "records_processed"
    - "validation_errors"
    - "influx_write_duration"
    - "parquet_write_duration"
    - "data_quality_score"
