# 策略开发模板

## 基本信息

- **策略名称**: [填写策略名称]
- **策略类型**: [趋势跟踪 / 均值回归 / 动量 / 套利 / 其他]
- **适用市场**: [加密货币 / 美股 / A股]
- **时间周期**: [15m / 1h / 4h / 1d]
- **创建日期**: [YYYY-MM-DD]
- **作者**: [你的名字]

## 策略概述

用 2-3 句话描述策略的核心思想。

例如：
> 基于双均线交叉原理，当短期均线上穿长期均线时做多，下穿时平仓。该策略适合趋势明显的市场环境。

## 交易逻辑

### 入场条件

#### 做多信号
1. 条件 1: [描述]
2. 条件 2: [描述]
3. 条件 3: [描述]

示例：
- 10日均线上穿30日均线（金叉）
- 成交量放大 20% 以上
- RSI > 50

#### 做空信号（如果支持）
1. 条件 1: [描述]
2. 条件 2: [描述]

### 出场条件

#### 止盈
- 方式: [固定百分比 / 移动止盈 / 技术指标]
- 参数: [具体数值]

示例：
- 盈利达到 10% 时平仓
- 或价格回调 5% 时平仓

#### 止损
- 方式: [固定止损 / ATR止损 / 技术止损]
- 参数: [具体数值]

示例：
- 亏损达到 -5% 时强制平仓
- 或跌破入场价的支撑位

#### 其他出场
- [时间止损]
- [反向信号]
- [持仓时间限制]

## 技术指标

### 使用的指标

| 指标名称 | 参数 | 用途 |
|---------|------|------|
| SMA | 10, 30 | 趋势判断 |
| RSI | 14 | 超买超卖 |
| 成交量 | - | 确认信号 |

### 指标计算方法

如果使用自定义指标，请说明计算公式。

## 仓位管理

### 单笔仓位
- 固定仓位: [例如：每次使用 10% 资金]
- 动态仓位: [例如：根据波动率调整]
- 最大持仓: [例如：不超过总资金的 50%]

### 加仓规则（如果有）
- 条件: [何时加仓]
- 频率: [最多加几次]
- 仓位: [每次加多少]

### 减仓规则（如果有）
- 条件: [何时减仓]
- 比例: [减少多少]

## 风控参数

| 参数 | 值 | 说明 |
|------|-----|------|
| 最大单笔亏损 | -5% | 单笔交易最大亏损比例 |
| 最大回撤 | -15% | 策略最大回撤限制 |
| 单日最大亏损 | -10% | 单日累计亏损上限 |
| 单品种最大仓位 | 30% | 单一品种持仓上限 |

## 交易品种

### 主要品种
- BTC/USDT
- ETH/USDT
- [其他品种]

### 品种选择标准
- 流动性要求: [例如：日均成交量 > 1亿美元]
- 波动率要求: [例如：30日波动率 > 2%]
- 其他要求: [例如：避免新上币种]

## 回测要求

### 回测时间
- 起始日期: [YYYY-MM-DD]
- 结束日期: [YYYY-MM-DD]
- 总时长: [例如：1年]

### 回测数据
- 数据源: [OKX / Binance / 其他]
- 时间周期: [15m / 1h / 4h]
- 数据质量: [要求无缺失]

### 预期指标

| 指标 | 目标值 | 说明 |
|------|--------|------|
| 年化收益率 | > 20% | 期望回报 |
| 夏普比率 | > 1.0 | 风险调整后收益 |
| 最大回撤 | < 20% | 可接受的最大回撤 |
| 胜率 | > 50% | 盈利交易比例 |
| 盈亏比 | > 1.5 | 平均盈利/平均亏损 |

## 实现细节

### 策略参数

```python
# 可调参数列表
params = {
    "fast_period": 10,      # 快速均线周期
    "slow_period": 30,      # 慢速均线周期
    "rsi_period": 14,       # RSI 周期
    "volume_threshold": 1.2, # 成交量放大倍数
    "position_size": 0.1,   # 仓位大小
    "stop_loss": 0.05,      # 止损比例
    "take_profit": 0.10,    # 止盈比例
}
```

### 代码框架

```python
from src.strategy.base import StrategyBase, StrategyConfig
from src.core.typing import BarFrame, StrategyOutput
import numpy as np

class MyStrategy(StrategyBase):
    """策略名称"""
    
    def __init__(self, config: StrategyConfig | None = None):
        super().__init__(config)
        
        # 提取参数
        self.fast_period = self.get_param("fast_period", 10)
        self.slow_period = self.get_param("slow_period", 30)
        # ... 其他参数
    
    def on_bar(self, bar_frame: BarFrame) -> StrategyOutput:
        """处理 bar 数据"""
        # 1. 检查数据
        if bar_frame.history is None or len(bar_frame.history) < self.slow_period:
            return None
        
        # 2. 计算指标
        # TODO: 实现指标计算
        
        # 3. 生成信号
        # TODO: 实现交易逻辑
        
        return None
```

## 风险评估

### 策略风险
- **市场风险**: [例如：震荡市场表现不佳]
- **流动性风险**: [例如：大额交易可能冲击价格]
- **技术风险**: [例如：依赖实时数据，断网会影响]

### 应对措施
- [针对每个风险的应对方法]

## 优化方向

### 短期优化
- [ ] 优化入场时机
- [ ] 调整止损位置
- [ ] 增加过滤条件

### 长期优化
- [ ] 加入机器学习优化参数
- [ ] 多品种组合优化
- [ ] 动态仓位管理

## 监控指标

运行后需要持续监控的指标：

- 实时盈亏
- 持仓时间分布
- 信号频率
- 滑点统计
- 手续费占比

## 参考资料

- [论文/书籍/文章链接]
- [相关研究]
- [灵感来源]

## 备注

其他需要说明的内容。

---

**模板版本**: v1.0
**最后更新**: 2026-02-01
